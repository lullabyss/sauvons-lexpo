@use "_variables" as *;

// RESET
@mixin Preset(){
	margin: 0;

	a{
		&:link, &:visited, &:hover, &:active{
			color: initial;
			text-decoration: none;
		}
	}

	img{
		display: block;
		position: relative;
		width: 100%;
		height: 100%;
		max-width: none;
		object-fit: contain;
	}

	.global-link{
		position: absolute;
		width: 100%;
		height: 100%;
		top: 0;
		left: 0;

		&:hover{
			cursor: pointer;
		}
	}

	// Typos
	font-family: acuta,
	serif;
	font-weight: 400;
	font-style: normal;
	line-height: 1.5;
	font-size: clamp(12px, 0.9vw, 16px);

	.italic{
		font-style: italic;
	}

	.bold{
		font-weight: 700;
	}
}


// Invariables des scènes
@mixin Scene{
	position: relative;
	aspect-ratio: 16 / 9;
	width: 100vw;
	// Entourloupette pour les écrans plus étroit que 16/9.
	max-width: calc(100vh * 16 / 9);
	height: auto;
	max-height: 100vh;
	margin: auto;
	background-color: $bleuciel;
	overflow: hidden;

	.dialogue{
		position: absolute;
		top: 0;
		left: 2%;
		z-index: 2;
		width: 42%;
		height: auto;
		max-height: 72%;
		padding: 3em;
		box-sizing: border-box;
		overflow-y: auto;

		scrollbar-width: none;
		-ms-overflow-style: none;

		&::-webkit-scrollbar{
			display: none;
		}

		.bulle{
			border-radius: 1.85em;
			padding: 1.35em 2em 1.5em;
			box-sizing: border-box;
			background-color: #fff;
			box-shadow: $shadow;
			margin-top: 1.1em;
			width: fit-content;
			max-width: 100%;
			min-width: 45%;

			display: none;
			transform: translateY(5%);
			transition: all 0.5s ease-out;

			.nom{
				font-size: 0.75em;
				text-transform: uppercase;
				font-weight: 800;
				color: $violet;
				margin: 0 0 0.5em;
			}

			.parole{
				margin: 0;
			}

			&.visible{
				display: block;
				@include BulleIn();
			}
		}

		.reponse{
			background-color: $bleu;
			max-width: 90%;
			align-self: flex-end;
			margin-right: 0;
			margin-left: auto;
		}

		.pensee{
			background-color: $violet;
			max-width: 90%;
			color: white;
			font-style: italic;
			align-self: flex-end;
			padding: 1.35em 1.85em;
			box-shadow: 0 0 1.4em -0.2em rgba(50, 30, 220, 0.5);
			margin-right: 0;
			margin-left: auto;

			.italic{
				font-style: normal;
			}
		}

		// Quand un Mini-jeu est en cours
		&.game-on{
			top: unset;
			left: unset;
			bottom: 1.5em;
			right: 0;
			max-height: 100%;
			width: 40%;

			.pensee{
				margin-right: auto;
				margin-left: 0;
				max-width: 100%;
			}
		}
	}
	// Fin des bulles et du dialogue


	.button{
		display: none;
		font-size: 1.15em;
		font-weight: 800;
		text-decoration: none;
		padding: 1em 1.4em;
		background-color: $orange;
		color: white;
		border-radius: 2em;
		position: absolute;
		bottom: 20%;
		left: 50%;
		translate: -50% 50%;
		transition: transform 200ms ease-in-out;
		box-shadow: $shadow;

		// États : hover, active, link, visited
		&:hover, &:active{
			transform: scale(1.1);
		}

		&.clickable{
			display: block;
			// @include m.FadeIn();
			animation: fade-in 360ms ease-out forwards;
		}
	}
	// Fin du bouton


	.lieu{
		opacity: 0;
		@include FadeIn();
		animation-delay: 250ms;
		background-color: rgba(210, 223, 233, 0.7);
		backdrop-filter: blur(0.1em);
		position: absolute;
		width: 34em;
		bottom: 2em;
		right: 2em;
		color: $violet;
		padding: 1.5em 1.75em;
		box-sizing: border-box;

		.titre-lieu{
			font-weight: 800;
			font-style: italic;
			font-size: 1.5em;
			margin: 0;
		}

		.labeur-lieu{
			font-size: 1.2em;
			color: $violet;
			margin: 0.5em 0 0;
		}
	}

	
	.hoverzone{
		position: absolute;
		height: auto;
		opacity: 0;
		transition: opacity 320ms ease-in-out;

		&:hover{
			opacity: 1;
			cursor: pointer;
		}
	}
}